{"version":3,"sources":["components/Person.js","services/contacts.js","components/Notification.js","components/App.js","index.js"],"names":["Person","person","removeEvent","name","number","onClick","PersonsData","persons","map","key","baseUrl","axios","get","then","response","data","newPerson","post","id","put","delete","Notification","message","type","className","FilterData","filter","handleFilter","value","onChange","PersonForm","handleNewPerson","handleNewName","handleNewNumber","newName","newNumber","onSubmit","App","useState","setPersons","setNewName","setNewNumber","filterData","setFilterData","filteredPersons","setFilteredPersons","errorMsg","setErrorMsg","alertMsg","setAlertMsg","useEffect","contactService","initialPersons","event","target","toLowerCase","includes","preventDefault","findIndex","returnedPerson","console","log","concat","setTimeout","window","confirm","updatePerson","find","p","catch","err","removePerson","res","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.832c6310.chunk.js","sourcesContent":["import React from 'react'\n\nconst Person = ({ person, removeEvent }) => {      \n    return (\n      <div>\n        <span>\n          {person.name}\n        </span>\n        &nbsp; \n        <span>\n          {person.number}\n        </span>\n        &nbsp;\n        <button onClick={removeEvent}>delete</button>\n      </div>\n    )\n  }\n  \nconst PersonsData = ({ persons, removeEvent }) => {\n    return (\n      <div>\n        {persons.map(person => \n          <Person key={person.name} person={person} removeEvent={() => removeEvent(person)} />  \n        )}\n      </div>\n    )\n}\n\nexport default PersonsData\n","import axios from 'axios'\nconst baseUrl = 'http://localhost:3001/api/persons'\n\nconst getAll = () => {\n    return axios.get(baseUrl).then(response => response.data)\n}\n\nconst create = newPerson => {\n    return axios.post(baseUrl, newPerson).then(response => response.data)\n}\n\nconst update = (id, newPerson) => {\n    return axios.put(`${baseUrl}/${id}`, newPerson).then(response => response.data)\n}\n\nconst remove = (id) => {\n    return axios.delete(`${baseUrl}/${id}`).then(response => response.data)\n}\n\nexport default { getAll, create, update, remove }","import React from 'react'\n\nconst Notification = ({ message, type }) => {\n    if (message === null) {\n        return null\n    }\n\n    return (\n        <div className={type}>\n            {message}\n        </div>\n    )\n}\n\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport PersonsData from './Person.js'\nimport contactService from '../services/contacts.js'\nimport Notification from './Notification.js'\n\nconst FilterData = ({ filter, handleFilter }) => {\n  return (\n    <div>\n      filter shown with: <input value={filter} onChange={handleFilter} />\n    </div>\n  )\n}\n\nconst PersonForm = ({handleNewPerson, handleNewName, handleNewNumber, newName, newNumber}) => {\n  return (\n    <div>\n      <form onSubmit={handleNewPerson}>\n        <div>\n          name: <input value={newName} onChange={handleNewName} />\n        </div>\n        <div>\n          number: <input value={newNumber} onChange={handleNewNumber} />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber] = useState('')\n  const [ filterData, setFilterData ] = useState('')\n  const [ filteredPersons, setFilteredPersons ] = useState([])\n\n  const [ errorMsg, setErrorMsg ] = useState(null)\n  const [ alertMsg, setAlertMsg ] = useState(null)\n\n  useEffect(() => {\n    // console.log(\"effect defined\");\n    // axios\n    //   .get('http://localhost:3001/persons')\n    //   .then(response => {\n    //     // console.log(\"response received\");\n    //     setPersons(response.data)\n    //   })\n\n    contactService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n  const handleFilter = (event) => {\n    setFilterData(event.target.value);\n    \n    if (event.target.value === '') {\n      setFilteredPersons([]);\n      return\n    }\n\n    // if you use filterData below for filtering, \n    // it creates some kind of weird dependency between states\n    // and filter doesn't work properly\n    setFilteredPersons(persons.filter( person => person.name.toLowerCase().includes(event.target.value.toLowerCase())));\n  }\n\n  const handleNewName = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNewNumber = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleNewPerson = (event) => {\n    event.preventDefault();\n    const newPerson = {\n        name: newName,\n        number: newNumber,\n    }\n    if (persons.findIndex(person => person.name === newName) !== -1) {\n        if (window.confirm(`${newName} is already in the phonebook, update number?`)) {\n          const updatePerson = persons.find(p => p.name === newPerson.name)\n          contactService\n            .update(updatePerson.id, newPerson)\n            .then(returnedPerson => {\n              setPersons(persons.map(p => p.id === returnedPerson.id ? returnedPerson : p))\n              setFilteredPersons(filteredPersons.map(p => p.id === returnedPerson.id ? returnedPerson : p))\n\n              setAlertMsg(\n                `${returnedPerson.name}'s number was changed to ${returnedPerson.number}`\n              )\n              setTimeout(() => {\n                setAlertMsg(null)\n              }, 5000)\n            })\n            .catch(err => {\n              console.log('error in update');\n              setPersons(persons.filter(p => p.id !== updatePerson.id))\n              setFilteredPersons(filteredPersons.filter(p => p.id !== updatePerson.id))\n\n              setErrorMsg(\n                `${updatePerson.name} was already removed from the phonebook`\n              )\n              setTimeout(() => {\n                setErrorMsg(null)\n              }, 5000)\n            })\n        }\n        return\n    }\n\n    // send to server\n    contactService\n      .create(newPerson)\n      .then(returnedPerson => {\n        console.log(returnedPerson);\n        setPersons(persons.concat(returnedPerson));\n        setNewName('');\n        setNewNumber('');\n\n        setAlertMsg(\n          `${returnedPerson.name} was added to the phonebook`\n        )\n        setTimeout(() => {\n          setAlertMsg(null)\n        }, 5000)\n      })\n  }\n\n  const handleRemovePerson = (person) => {\n    // event.preventDefault();\n    if (window.confirm(`Delete ${person.name} from phonebook?`)) {\n      const removePerson = persons.find(p => person.name === p.name)\n      contactService\n        .remove(removePerson.id)\n        .then(res => {\n          // console.log(res.status);\n          setPersons(persons.filter(p => removePerson.id !== p.id))\n          setFilteredPersons(filteredPersons.filter(p => removePerson.id !== p.id))\n\n          setAlertMsg(\n            `${removePerson.name} was removed from the phonebook`\n          )\n          setTimeout(() => {\n            setAlertMsg(null)\n          }, 5000)\n        })\n        .catch(err => {\n          console.log('error caught in delete')\n          setPersons(persons.filter(p => p.id !== removePerson.id))\n          setFilteredPersons(filteredPersons.filter(p => p.id !== removePerson.id))\n          setErrorMsg(\n            `${removePerson.name} was already removed from the phonebook`\n          )\n          setTimeout(() => {\n            setErrorMsg(null)\n          }, 5000)\n        })\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={alertMsg} type={'alert'} />\n      <Notification message={errorMsg} type={'error'} />\n      <FilterData filter={filterData} handleFilter={handleFilter} />\n      <h2>Add new</h2>\n      <PersonForm newName={newName} newNumber={newNumber} \n        handleNewName={handleNewName} handleNewNumber={handleNewNumber}\n        handleNewPerson={handleNewPerson} />\n      <h2>Numbers</h2>\n      <PersonsData persons={filterData === '' ? persons : filteredPersons} removeEvent={handleRemovePerson} />\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n    <App />, document.getElementById('root')\n);\n\n"],"sourceRoot":""}